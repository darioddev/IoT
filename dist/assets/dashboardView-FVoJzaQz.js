import{r as S,l as Y,m as $,v as le,b as d,c as u,t as x,g as y,F as N,j as I,d as e,k as R,f as b,p as D,e as E,q as ne,s as re,x as ie,u as de,i as O,y as ce,z as v,A as ue,h as me,B as ve,C as xe,D as G}from"./index-OcUos6zF.js";import{_ as he}from"./buttonThemeComponet-nceu8db_.js";import{g as V,h as B}from"./validations-3worHtu6.js";import{_ as pe}from"./_plugin-vue_export-helper-x3n3nnut.js";import"https://www.gstatic.com/firebasejs/9.6.2/firebase-app.js";import"https://www.gstatic.com/firebasejs/9.6.2/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/9.6.2/firebase-auth.js";const fe=["name","id"],ge={key:0,value:"",disabled:"",selected:""},be=["value"],A={__name:"selectComponent",props:{name:{type:String,required:!0},elementos:{type:Array,required:!0},text:{type:String,required:!1,default:"Selecciona una opción"},selectedValue:{type:String,required:!1,default:""}},setup(m){const{name:p,elementos:c,text:n,selectedValue:l}=m,_=S(l);return Y(()=>l,k=>{_.value=k},{immediate:!0,deep:!0}),(k,C)=>$((d(),u("select",{name:m.name,id:m.name,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5","onUpdate:modelValue":C[0]||(C[0]=f=>_.value=f)},[m.selectedValue?y("",!0):(d(),u("option",ge,x(m.text),1)),(d(!0),u(N,null,I(m.elementos,f=>(d(),u("option",{key:f.name,value:f.name},x(f.name),9,be))),128))],8,fe)),[[le,_.value]])}},we={key:0,id:"crud-modal",tabindex:"-1","aria-hidden":"true",class:"flex overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},_e={class:"relative p-4 w-full max-w-md max-h-full"},ye={class:"relative bg-white rounded-lg shadow",id:"modal"},ke={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t"},Se={class:"text-lg font-semibold text-gray-900"},Ce=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),je=e("span",{class:"sr-only"},"Close modal",-1),Ee=[Ce,je],$e={class:"mb-4"},Me={class:"mb-2"},De={key:0,class:"text-sm font-bold text-red-600 text-center flex items-center justify-center"},Ve=e("svg",{xmlns:"http://www.w3.org/2000/svg",x:"20px",y:"0px",width:"25",height:"25",viewBox:"0 0 48 48",class:""},[e("path",{fill:"#f44336",d:"M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"}),e("path",{fill:"#fff",d:"M29.656,15.516l2.828,2.828l-14.14,14.14l-2.828-2.828L29.656,15.516z"}),e("path",{fill:"#fff",d:"M32.484,29.656l-2.828,2.828l-14.14-14.14l2.828-2.828L32.484,29.656z"})],-1),Be={key:1,class:"text-sm font-bold text-blue-600 text-center flex items-center justify-center"},Ne=e("svg",{class:"animate-spin -ms-1 w-5 h-5 me-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),Ae={class:"col-span-2 flex items-center justify-between"},Ie=["name","id","placeholder"],ze={class:"col-span-2 flex items-center justify-between pt-2"},Le={type:"submit",class:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},qe=e("svg",{class:"me-1 -ms-1 w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),H={__name:"modalComponent",props:{head:{type:String,required:!0},name:{type:String,required:!0},placeholder:{type:String,required:!1,default:""},elements:{type:Array,required:!0},state:{type:Array,required:!1,default:()=>[]},value:{type:Boolean,required:!1,default:!1},messageError:{type:String,required:!1,default:""},initialData:{type:Object,required:!1,default:()=>({})},isLoading:{type:Object,required:!1}},emits:["closeModal","handleSubmit"],setup(m,{emit:p}){const c=m,n=S({name:"",unit:"",value:"",executor:"",state:""}),l=p,_=()=>l("handleSubmit",n.value),k=()=>l("closeModal",n.value),C=r=>{c.state.length===0?n.value={...n.value,unit:r.target.value}:n.value={...n.value,executor:r.target.value}},f=r=>{n.value={...n.value,state:r.target.value}};return Y(()=>c.initialData,r=>{n.value={...r}},{deep:!0}),(r,g)=>c.value?(d(),u("div",we,[e("div",_e,[e("div",ye,[e("div",ke,[e("h3",Se,x(c.head),1),e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center","data-modal-toggle":"crud-modal",onClick:k},Ee)]),e("form",{class:"p-4 md:p-5",onSubmit:R(_,["prevent"])},[e("div",$e,[e("div",Me,[c.messageError!==""?(d(),u("p",De,[Ve,b(" "+x(c.messageError),1)])):y("",!0),c.isLoading.load?(d(),u("p",Be,[Ne,b(" "+x(c.isLoading.message),1)])):y("",!0)]),e("div",Ae,[$(e("input",{type:"text",name:c.name,id:c.name,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 mr-2",placeholder:m.placeholder,"onUpdate:modelValue":g[0]||(g[0]=a=>n.value.name=a)},null,8,Ie),[[D,n.value.name]]),E(A,{name:c.name,elementos:c.elements,onChange:C,selectedValue:n.value.unit||n.value.executor},null,8,["name","elementos","selectedValue"])]),e("div",ze,[c.state.length===0?$((d(),u("input",{key:0,type:"text",name:"value",id:"value",class:"bg-gray-50 border border-gray-300 teaxt-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5",placeholder:"Valor de la unidad","onUpdate:modelValue":g[1]||(g[1]=a=>n.value.value=a)},null,512)),[[D,n.value.value]]):(d(),ne(A,{key:1,name:c.name,elementos:c.state,onChange:f,selectedValue:n.value.state,text:"Estado del ejecutor"},null,8,["name","elementos","selectedValue"]))])]),e("button",Le,[qe,b(" "+x(m.head),1)])],32)])])])):y("",!0)}},F=m=>new Promise(p=>{re(m,c=>{p(c.docs.map(n=>({id:n.id,...n.data()})))})}),P={unitName:"units",executorName:"executores",async getUnits(){return await F(this.unitName)},async getExecutors(){return await F(this.executorName)},getLength:m=>Object.keys(m).length,handleSelect:(m,p,c)=>{const n=c.target.selectedOptions[0].value;m[p]=n}},i=m=>(ve("data-v-4f359ddd"),m=m(),xe(),m),Ue={class:"fixed inset-x-0 top-0 z-10 w-full px-4 py-1 bg-white shadow-md border-slate-500 transition duration-700 ease-out"},Oe={class:"flex justify-between p-4"},Te=i(()=>e("div",{class:"text-[2rem] leading-[3rem] tracking-tight font-bold text-black",id:"h1"},[b(" Bienvenido a "),e("span",{class:"text-blue-700"},"IoT")],-1)),He={class:"flex items-center space-x-4 text-lg font-semibold tracking-tight"},Fe=i(()=>e("svg",{class:"w-6 h-6 text-black mx-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"{2}",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),Pe=i(()=>e("svg",{class:"w-6 h-6 text-black mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"{2}",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),Ye={class:"flex flex-col items-center justify-center w-full h-screen bg-gray-100"},Re={key:0,class:"absolute top-0 left-0 w-full h-full flex items-center justify-center bg-white opacity-75"},Ge=i(()=>e("p",{class:"text-2xl font-bold text-gray-500"},"Cargando...",-1)),Je=[Ge],Ke={key:1},Qe={class:"flex flex-col items-center justify-center w-full h-full"},We=i(()=>e("p",{class:"text-2xl font-bold text-gray-500"},"No tienes ningún espacio",-1)),Xe=i(()=>e("svg",{class:"w-6 h-6 text-black mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"{2}",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),Ze={key:2,class:"flex flex-col items-start justify-start h-screen pt-20 w-full"},et={class:"w-full"},tt=i(()=>e("div",{class:"p-4"},[e("p",{class:"text-3xl font-bold text-gray-500"},"Tus espacios")],-1)),st={class:"flex flex-col justify-center w-ful mx-4"},ot={class:"w-full flex rounded-t-lg bg-blue-700 mt-1"},at={class:"text-2xl font-bold text-white p-2"},lt={class:"flex items-center p-1 containerDevice"},nt={class:"text-base font-bold text-white mx-1 underline"},rt={class:"text-base font-bold text-white mx-1 underline"},it=["onClick"],dt=i(()=>e("svg",{class:"w-6 h-6 text-white mr-2 mt-2 rounded-lg cursor-pointer hover:bg-sky-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",title:"Más información sobre el espacio"},[b(" > > "),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"{2}",d:"M19 5l-7 7-7-7"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"{2}",d:"M19 5l-7 7-7-7"})],-1)),ct=[dt],ut={key:0},mt=G('<div class="flex flex-col items-center justify-center w-full p-2 bg-blue-100 content" data-v-4f359ddd><p class="text-2xl font-bold text-gray-500" data-v-4f359ddd>Sensores</p></div><div class="flex flex-row items-center justify-between w-full pl-4 bg-blue-600" data-v-4f359ddd><div class="flex flex-row items-center justify-between w-full pl-4 bg-blue-600" data-v-4f359ddd><div class="w-1/3" data-v-4f359ddd><p class="text-base font-bold text-white mx-1" data-v-4f359ddd>Nombre</p></div><div class="w-1/3" data-v-4f359ddd><p class="text-base font-bold text-white mx-1" data-v-4f359ddd>Unidad de medida</p></div><div class="w-1/3" data-v-4f359ddd><p class="text-base font-bold text-white mx-1" data-v-4f359ddd>Valor</p></div><div class="w-1/3" data-v-4f359ddd><p class="text-base font-bold text-white mx-1" data-v-4f359ddd></p></div></div></div>',2),vt={class:"w-1/3"},xt={class:"text-base font-medium text-white"},ht={class:"w-1/3 pl-2"},pt={class:"text-base font-medium text-white"},ft={class:"w-1/3 pl-2"},gt={class:"text-base font-medium text-white"},bt={class:"w-1/3"},wt={class:"flex flex-row item-center justify-end p-1 mr-20"},_t=["onClick"],yt=i(()=>e("i",{class:"bx bxs-rename"},null,-1)),kt=[yt],St=["onClick"],Ct=i(()=>e("i",{class:"bx bxs-trash"},null,-1)),jt=[Ct],Et=G('<div class="flex flex-col items-center justify-center w-full p-2 bg-blue-100 content" data-v-4f359ddd><p class="text-2xl font-bold text-gray-500" data-v-4f359ddd>Ejecutores</p></div><div class="flex flex-row items-center justify-between w-full pl-4 bg-blue-600" data-v-4f359ddd><div class="flex flex-row items-center justify-between w-full pl-4 bg-blue-600" data-v-4f359ddd><div class="w-1/3" data-v-4f359ddd><p class="text-base font-bold text-white mx-1" data-v-4f359ddd>Nombre</p></div><div class="w-1/3" data-v-4f359ddd><p class="text-base font-bold text-white mx-1" data-v-4f359ddd>Dispositivo</p></div><div class="w-1/3" data-v-4f359ddd><p class="text-base font-bold text-white mx-1" data-v-4f359ddd>Estado</p></div><div class="w-1/3" data-v-4f359ddd><p class="text-base font-bold text-white mx-1" data-v-4f359ddd></p></div></div></div>',2),$t={class:"w-1/3"},Mt={class:"text-base font-medium text-white"},Dt={class:"w-1/3 pl-2"},Vt={class:"text-base font-medium text-white"},Bt={class:"w-1/3 pl-2"},Nt={class:"text-base font-medium text-white"},At={class:"w-1/3"},It={class:"flex flex-row item-center justify-end p-1 mr-20"},zt=["onClick"],Lt=i(()=>e("i",{class:"bx bxs-rename"},null,-1)),qt=[Lt],Ut=["onClick"],Ot=i(()=>e("i",{class:"bx bxs-trash"},null,-1)),Tt=[Ot],Ht={class:"flex flex-row bg-blue-700 rounded-b-lg p-3"},Ft=["onClick","id"],Pt=i(()=>e("i",{class:"bx bx-radar bx-sm"},null,-1)),Yt=["onClick"],Rt=i(()=>e("i",{class:"bx bx-devices bx-sm"},null,-1)),Gt=["onClick"],Jt=i(()=>e("i",{class:"bx bxs-trash text-lg mr-1"},null,-1)),Kt={key:3,id:"crud-modal",tabindex:"-1","aria-hidden":"true",class:"flex overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},Qt={class:"relative p-4 w-full max-w-md max-h-full"},Wt={class:"relative bg-white rounded-lg shadow",id:"modal"},Xt=i(()=>e("h3",{class:"text-lg font-semibold text-gray-900"}," Crear un nuevo espacio ",-1)),Zt=i(()=>e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)),es=i(()=>e("span",{class:"sr-only"},"Close modal",-1)),ts=[Zt,es],ss={class:"grid gap-4 mb-4 grid-cols-2"},os={class:"col-span-2"},as={key:0,class:"text-sm font-bold text-red-600 flex"},ls=i(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",x:"20px",y:"0px",width:"25",height:"25",viewBox:"0 0 48 48",class:"pb-1"},[e("path",{fill:"#f44336",d:"M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"}),e("path",{fill:"#fff",d:"M29.656,15.516l2.828,2.828l-14.14,14.14l-2.828-2.828L29.656,15.516z"}),e("path",{fill:"#fff",d:"M32.484,29.656l-2.828,2.828l-14.14-14.14l2.828-2.828L32.484,29.656z"})],-1)),ns={key:1,class:"text-sm font-bold text-blue-600 flex"},rs=i(()=>e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)),is=i(()=>e("label",{for:"name",class:"block mb-2 text-sm font-medwium text-gray-900"},[b("Name "),e("span",{class:"text-red-500"},"*")],-1)),ds=i(()=>e("label",{for:"sensor",class:"block mb-2 text-sm font-medium text-gray-900 p-1"},"Sensor",-1)),cs={class:"col-span-2 flex items-center justify-between"},us={class:"col-span-2 flex items-center justify-between pt-2"},ms=i(()=>e("label",{for:"executor",class:"block mb-2 text-sm font-medium text-gray-900 p-1"},"Ejecutor",-1)),vs={class:"col-span-2 flex items-center"},xs={class:"col-span-2 flex items-center justify-between pt-2"},hs=i(()=>e("button",{type:"submit",class:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},[e("svg",{class:"me-1 -ms-1 w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})]),b(" Crear nuevo espacio ")],-1)),ps={__name:"dashboardView",setup(m){const p=S(ie.currentUser.uid),c=de(),n=S(!1),l=O([]),_=O([]),k=O([]),C=S([]),f=S(""),r=S({name:"",unit:"",value:""}),g=S({name:"",executor:"",state:""}),a=S({id:-1,sensor:!1,executor:!1,addSpace:!1,message:"",editSpace:!1,loading:{load:!1,message:"Cargando..."}}),T=()=>{a.value.id=-1,f.value="",r.value={name:"",unit:"",value:""},g.value={name:"",executor:"",state:0}},j=()=>{a.value={id:-1,sensor:!1,executor:!1,addSpace:!1,message:"",loading:{load:!1,message:"Cargando..."}},T()},z=t=>{t!=null&&Object.keys(t).forEach(s=>{s!=="id"&&(t[s]="")}),j()},M=(t,s=-1)=>{a.value.id=s,a.value[t]=!a.value[t]},J=async()=>{try{if(!f.value.trim())throw new Error("El nombre del espacio no puede estar vacío");if(v.isExistSpace(l,f.value))throw new Error(`Ya existe un espacio con el nombre : ${f.value}`);const t=[{id:V(),...r.value}],s=[{id:V(),...g.value}];if(B(r.value)||B(g.value))throw new Error("Debes añadir al menos un sensor y un ejecutor");a.value.message="",a.value.loading={load:!0,message:"Añadiendo espacio..."},await new Promise(o=>setTimeout(o,300)),l.push({id:V(),name:f.value,sensores:t,ejecutores:s}),await v.updateDocument(p.value,{space:l}),j(),T()}catch(t){a.value.message=t.message}},K=async t=>{try{const s=a.value.sensor?{id:V(),name:t.name,unit:t.unit,value:t.value}:{id:V(),name:t.name,executor:t.executor,state:t.state};if(a.value.id===-1)throw new Error("Debes seleccionar un espacio");if(B(s))throw new Error("Debes completar todos los campos");const o=v.findSpaceIndex(l,a.value.id);if(a.value.sensor&&v.isExistSensor(l,a.value.id,s.name))throw new Error(`Ya existe un sensor con el nombre : ${s.name}`);if(a.value.executor&&v.isExistExecutor(l,a.value.id,s.name))throw new Error(`Ya existe un ejecutor con el nombre : ${s.name}`);a.value.sensor&&(l[o].sensores.push({...s}),a.value.loading={load:!0,message:"Añadiendo sensor..."}),a.value.executor&&(l[o].ejecutores.push({...s}),a.value.loading={load:!0,message:"Añadiendo ejecutor..."}),await new Promise(w=>setTimeout(w,300)),await v.updateDocument(p.value,{space:l}),z(t)}catch(s){a.value.message=s.message}},Q=(t,s)=>{const o=v.findSensor(l,t,s);r.value={...o.data},M("editSpace")},W=(t,s)=>{const o=v.findExecutor(l,t,s);g.value={...o.data},M("editSpace")},X=async t=>{try{const s=v.findSpaceIndex(l,t);confirm(`¿Estás seguro de eliminar el espacio ${l[s].name}?`)&&(l.splice(s,1),await v.updateDocument(p.value,{space:l}),j())}catch(s){console.error(s)}},Z=async(t,s)=>{try{const o=v.findSensor(l,t,s);confirm(`¿Estás seguro de eliminar el sensor ${o.data.name} del espacio ${l[o.indexSpace].name}?`)&&(l[o.indexSpace].sensores.splice(o.executorIndex,1),await v.updateDocument(p.value,{space:l}),j())}catch(o){console.error(o)}},ee=async(t,s)=>{try{const o=v.findExecutor(l,t,s);confirm(`¿Estás seguro de eliminar el ejecutor ${o.data.name} del espacio ${l[o.indexSpace].name}?`)&&(l[o.indexSpace].ejecutores.splice(o.executorIndex,1),await v.updateDocument(p.value,{space:l}),j())}catch(o){console.error(o)}},te=async t=>{try{if(B(t))throw new Error("Debes completar todos los campos");const{indexSpace:s,executorIndex:o}=v.findExecutor(l,a.value.id,t.id);if(t.name!==l[s].ejecutores[o].name&&v.isExistExecutor(l,a.value.id,t.name))throw new Error(`Ya existe un ejecutor con el nombre : ${t.name}`);a.value.loading.load={load:!0,message:"Actualizando ejecutor..."},await new Promise(w=>setTimeout(w,200)),l[s].ejecutores[o]={...t},await v.updateDocument(p.value,{space:l}),j()}catch(s){a.value.message=s.message}},se=async t=>{try{if(B(t))throw new Error("Debes completar todos los campos");const{indexSpace:s,sensorIndex:o}=v.findSensor(l,a.value.id,t.id);if(t.name!==l[s].sensores[o].name&&v.isExistSensor(l,a.value.id,t.name))throw new Error(`Ya existe un sensor con el nombre : ${t.name}`);a.value.loading={load:!0,message:"Actualizando sensor..."},await new Promise(w=>setTimeout(w,200)),l[s].sensores[o]={...t},await v.updateDocument(p.value,{space:l}),j()}catch(s){a.value.message=s.message}},oe=t=>{r.value.name.trim()?se(t):te(t)},L=t=>{const s=t.target.selectedOptions[0].value;t.target.id==="unit"&&(r.value.unit=s),t.target.id==="executor"&&(g.value.executor=s),t.target.id==="stateExecutor"&&(g.value.state=s)},ae=async()=>{try{confirm("¿Estás seguro de cerrar sesión?")&&(await me.logout(),c.replace({name:"home"}))}catch(t){console.log(t)}};return ce(v.name,p.value,t=>{l.splice(0,l.length),t.data().space.map(s=>l.push(s))}),ue(async()=>{n.value=!0;try{const t=async()=>{(await P.getUnits()).map(w=>_.push(w))},s=async()=>{(await P.getExecutors()).forEach(w=>k.push(w))};await t(),await s()}catch(t){console.error(t)}finally{n.value=!1}}),(t,s)=>(d(),u(N,null,[e("nav",Ue,[e("div",Oe,[Te,e("div",He,[e("div",null,[e("button",{class:"flex items-center px-6 py-2 text-white transition duration-500 ease-out bg-blue-700 rounded-lg hover:bg-blue-800 hover:ease-in hover:underline",type:"button",onClick:s[0]||(s[0]=o=>M("addSpace"))},[Fe,b(" Añadir un nuevo espacio ")])]),e("button",{class:"flex items-center px-6 py-2 mx-2 text-black transition duration-700 ease-out bg-white border border-black rounded-lg hover:bg-black hover:border hover:text-white",type:"button",onClick:ae},[Pe,b(" Cerrar sesión ")])])])]),e("main",Ye,[E(he,{class:"fixed top-6 right-4 p-2 bg-gray-200 rounded-full mt-20"}),n.value?(d(),u("div",Re,Je)):y("",!0),l.length===0&&!n.value?(d(),u("div",Ke,[e("div",Qe,[We,e("button",{class:"flex items-center px-6 py-2 mt-4 text-white transition duration-500 ease-out bg-blue-700 rounded-lg hover:bg-blue-800 hover:ease-in hover:underline",type:"button",onClick:s[1]||(s[1]=o=>M("addSpace"))},[Xe,b(" Añadir un nuevo espacio ")])])])):!n.value&&l.length!==0?(d(),u("div",Ze,[e("div",et,[tt,e("div",st,[(d(!0),u(N,null,I(l,(o,w)=>(d(),u("div",{key:o.name,class:"mx-1"},[e("div",ot,[e("div",null,[e("p",at,x(o.name.trim().toLowerCase()),1),e("div",lt,[e("p",nt,"Sensores: "+x(o.sensores.length),1),e("p",rt,"Ejecutores: "+x(o.ejecutores.length),1)])]),e("div",{class:"flex flex-col items-end w-1/2 ml-auto p-5",onClick:h=>C.value[o.name]=!C.value[o.name]},ct,8,it)]),C.value[o.name]?(d(),u("div",ut,[mt,(d(!0),u(N,null,I(o.sensores,(h,q)=>(d(),u("div",{key:h.id,class:"w-full flex flex-row bg-blue-600 rounder-lg pl-8"},[e("div",vt,[e("p",xt,x(q+1)+" - "+x(h.name),1)]),e("div",ht,[e("p",pt,x(h.unit),1)]),e("div",ft,[e("p",gt,x(h.value),1)]),e("div",bt,[e("div",wt,[e("button",{class:"flex items-center px-6 py-2 mx-2 text-white transition duration-500 ease-out bg-blue-700 rounded-lg hover:bg-blue-800 hover:ease-in hover:underline",type:"button",onClick:U=>{Q(o.id,h.id),a.value.id=o.id}},kt,8,_t),e("button",{class:"flex items-center px-3 py-2 mx-2 text-white transition duration-500 ease-out bg-red-700 rounded-lg hover:bg-red-800 hover:ease-in hover:underline",type:"button",onClick:U=>Z(o.id,h.id)},jt,8,St)])])]))),128)),e("div",null,[Et,(d(!0),u(N,null,I(o.ejecutores,(h,q)=>(d(),u("div",{key:h.id,class:"w-full flex flex-row bg-blue-600 rounder-lg pl-8 pb-2"},[e("div",$t,[e("p",Mt,x(q+1)+" - "+x(h.name),1)]),e("div",Dt,[e("p",Vt,x(h.executor),1)]),e("div",Bt,[e("p",Nt,x(h.state),1)]),e("div",At,[e("div",It,[e("button",{class:"flex items-center px-6 py-2 mx-2 text-white transition duration-500 ease-out bg-blue-700 rounded-lg hover:bg-blue-800 hover:ease-in hover:underline",type:"button",onClick:U=>{W(o.id,h.id),a.value.id=o.id}},qt,8,zt),e("button",{class:"flex items-center px-3 py-2 mx-2 text-white transition duration-500 ease-out bg-red-700 rounded-lg hover:bg-red-800 hover:ease-in hover:underline",type:"button",onClick:U=>ee(o.id,h.id)},Tt,8,Ut)])])]))),128))]),e("div",null,[e("div",Ht,[e("button",{class:"flex items-center px-4 py-2 mx-2 text-white transition duration-500 ease-out bg-blue-700 rounded-lg hover:bg-blue-800 hover:ease-in hover:underline",type:"button",onClick:h=>M("sensor",o.id),id:w},[Pt,b(" Añadir un nuevo sensor ")],8,Ft),e("button",{class:"flex items-center px-4 py-2 mx-2 text-white transition duration-500 ease-out bg-blue-700 rounded-lg hover:bg-blue-800 hover:ease-in hover:underline",type:"button",onClick:h=>M("executor",o.id)},[Rt,b(" Añadir un nuevo ejecutor ")],8,Yt),e("button",{class:"flex items-center px-4 py-2 mx-2 text-white transition duration-500 ease-out bg-red-700 rounded-lg hover:bg-red-800 hover:ease-in hover:underline",type:"button",onClick:h=>X(o.id)},[Jt,b(" Eliminar espacio ")],8,Gt)])])])):y("",!0)]))),128))])])])):y("",!0),E(H,{head:`Añadir un nuevo ${a.value.sensor?"sensor":"ejecutor"}`,name:a.value.sensor?"sensor":"executor",placeholder:a.value.sensor?"Nombre del sensor":"Nombre del ejecutor",elements:a.value.sensor?_:k,state:a.value.executor?[{name:"Activo",value:1},{name:"Inactivo",value:0}]:[],value:a.value[a.value.sensor?"sensor":"executor"],onCloseModal:z,onHandleSubmit:K,messageError:a.value.message,isLoading:a.value.loading,initialData:a.value.sensor?r.value:g.value},null,8,["head","name","placeholder","elements","state","value","messageError","isLoading","initialData"]),E(H,{head:`Modificar ${r.value.name.trim()?"sensor":"ejecutor"} ${r.value.name}`,name:r.value.name.trim()?"sensor":"ejecutor",placeholder:`Nombre del ${r.value.name.trim()?"sensor":"ejecutor"}`,elements:r.value.name.trim()?_:k,state:r.value.name.trim()?[]:[{name:"Activo",value:1},{name:"Inactivo",value:0}],value:a.value.editSpace,onCloseModal:z,onHandleSubmit:oe,messageError:a.value.message,isLoading:a.value.loading,initialData:r.value.name.trim()?r.value:g.value},null,8,["head","name","placeholder","elements","state","value","messageError","isLoading","initialData"]),a.value.addSpace?(d(),u("div",Kt,[e("div",Qt,[e("div",Wt,[e("div",{class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t"},[Xt,e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center","data-modal-toggle":"crud-modal",onClick:j},ts)]),e("form",{class:"p-4 md:p-5",onSubmit:R(J,["prevent"])},[e("div",ss,[e("div",os,[a.value.message!==""?(d(),u("p",as,[ls,b(" "+x(a.value.message),1)])):y("",!0),a.value.loading.load?(d(),u("p",ns,[rs,b(" "+x(a.value.loading.message),1)])):y("",!0),is,$(e("input",{type:"text",name:"name",id:"name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5",placeholder:"Nombre del espacio","onUpdate:modelValue":s[2]||(s[2]=o=>f.value=o)},null,512),[[D,f.value]]),ds,e("div",cs,[$(e("input",{type:"text",name:"sensor",id:"sensor",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 mr-2",placeholder:"Nombre del sensor","onUpdate:modelValue":s[3]||(s[3]=o=>r.value.name=o)},null,512),[[D,r.value.name]]),E(A,{name:"unit",elementos:_,onChange:L},null,8,["elementos"])]),e("div",us,[$(e("input",{type:"text",name:"value",id:"value",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5",placeholder:"Valor de la unidad","onUpdate:modelValue":s[4]||(s[4]=o=>r.value.value=o)},null,512),[[D,r.value.value]])]),ms,e("div",vs,[$(e("input",{type:"text",name:"executor",id:"executor",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 mr-2",placeholder:"Nombre del ejecutor","onUpdate:modelValue":s[5]||(s[5]=o=>g.value.name=o)},null,512),[[D,g.value.name]]),E(A,{name:"executor",elementos:k,onChange:L},null,8,["elementos"])]),e("div",xs,[E(A,{name:"stateExecutor",id:"stateExecutor",elementos:[{name:"Activo",value:1},{name:"Inactivo",value:0}],text:"Estado del ejecutor",onChange:L})])])]),hs],32)])])])):y("",!0)])],64))}},Ss=pe(ps,[["__scopeId","data-v-4f359ddd"]]);export{Ss as default};
